# Boranga

This project is to consolidate threatened species and communitiesâ€™ data into a modern system application platform, as the existing system and associated legacy data platforms are in formats no longer supported by OIM.

Stack:

- Ubuntu
- Postgres (PostGIS)
- Python / Django
- Node / Vite / Vue 3

# Install and Configure Ledger

Boranga requires ledger to be set up and running first.

See: https://github.com/dbca-wa/ledger for instructions.

# Install Boranga Project

```
git clone https://github.com/dbca-wa/boranga.git
cd boranga
```

Create and activate a virtual environment if required

```
pip install -r requirements.txt
```

## Database Migration

```
See [Migration Steps](migration_steps.md)
```

## Create and Populate the .env File

```
DEBUG=True
DATABASE_URL="postgis://<username>:<password>@localhost:5432/boranga_dev"
LEDGER_DATABASE_URL='postgis://<username>:<password>@localhost:5432/das_dev'
LEDGER_API_URL="http://localhost:8000"
LEDGER_API_KEY="<ledger_api_key>"
SITE_PREFIX='boranga-dev'
SITE_DOMAIN='dbca.wa.gov.au'
SECRET_KEY='SECRET_KEY_YO'
PRODUCTION_EMAIL=False
NOTIFICATION_EMAIL='<email1>,<email2>'
NON_PROD_EMAIL='<email1>'
EMAIL_INSTANCE='DEV'
EMAIL_HOST='<email_host>'
DJANGO_HTTPS=True
DEFAULT_FROM_EMAIL='no-reply@dbca.wa.gov.au'
ALLOWED_HOSTS='["*"]'
CONSOLE_EMAIL_BACKEND=True
ENABLE_DJANGO_LOGIN=True
EMAIL_DELIVERY='on'
NOMOS_USERNAME='<username>'
NOMOS_PASSWORD='<password>'
SILENCE_SYSTEM_CHECKS=False
LOG_CONSOLE_LEVEL='DEBUG'
NOMOS_URL="https://wagyl.bio.wa.gov.au/api"
SHOW_DEBUG_TOOLBAR=False
SITE_SUBDOMAIN_INTERNAL_SUFFIX=None
NOMOS_BLOB_URL="https://stproponentdata.blob.core.windows.net/public-downloads/taxonomy/species_taxo_export_current.json"
OCR_BULK_IMPORT_PROCESS_TASKS_IMMEDIATELY=True
SECURE_CROSS_ORIGIN_OPENER_POLICY=None
```

_NOTE: The LEDGER_API_KEY can be generated by adding a new api entry in the api app via ledger's django admin_

https://<ledger_url>/admin/api/

# Build the Front End

```
cd boranga/frontend/boranga
```

Create and activate a virtual environment if required

```
npm install
npm run build
```

# Collect Static

```
./manage.py collectstatic
```

# Run Front End Dev Server

```
npm run dev
```

# Run the Django Server

```
./manage.py runserver <UNUSED_PORT>
```
